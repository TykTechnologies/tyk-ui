module.exports=function(n){var r={};function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=n,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=97)}({0:function(e,t){e.exports=require("react")},1:function(e,t,n){e.exports=n(16)()},12:function(e,t,n){"use strict";var r=n(19);n.d(t,"a",function(){return r.default})},13:function(e,t){e.exports=require("ReactDOM")},14:function(t,e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(e){return n(e)}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(e)}t.exports=r},140:function(e,t,n){var s=n(3);e.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){s(t,e,n[e])})}return t}},15:function(n,e){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.exports=r},16:function(e,t,n){"use strict";var i=n(17);function r(){}e.exports=function(){function e(e,t,n,r,s,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},17:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},19:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(4),s=n.n(r),o=n(5),a=n.n(o),i=n(6),l=n.n(i),u=n(7),c=n.n(u),p=n(8),f=n.n(p),h=n(3),d=n.n(h),y=n(0),m=n.n(y),b=n(1),v=n.n(b),g=function(e){function t(){return s()(this,t),l()(this,c()(t).apply(this,arguments))}return f()(t,e),a()(t,[{key:"getCssClasses",value:function(){var e=[],t=this.props.family||"fa";return e.push(t),e.push(t+"-"+this.props.type),e.concat([this.props.className]).join(" ")}},{key:"render",value:function(){return m.a.createElement("i",{className:this.getCssClasses()})}}]),t}(y.Component);d()(g,"propTypes",{familly:v.a.string,type:v.a.string.isRequired})},2:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},3:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},5:function(e,t){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},6:function(e,t,n){var r=n(14),s=n(2);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}},7:function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},8:function(e,t,n){var r=n(15);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},97:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return j});var r=n(140),a=n.n(r),s=n(4),o=n.n(s),i=n(5),l=n.n(i),u=n(6),c=n.n(u),p=n(7),f=n.n(p),h=n(8),d=n.n(h),y=n(2),m=n.n(y),b=n(3),v=n.n(b),g=n(0),k=n.n(g),S=n(13),x=n.n(S),O=n(1),C=n.n(O),E=n(12),R=function(e,t,n){return n||(e||t?[]:null)},j=function(e){function n(e){var t;return o()(this,n),t=c()(this,f()(n).call(this,e)),v()(m()(m()(t)),"state",{cursor:-1,opened:!1,width:50,initialValue:t.props.value,stateSelectedValues:R(t.props.multiple,t.props.tags,t.props.value),searchText:""}),t.comboboxRef=Object(g.createRef)(),t.valuesListRef=Object(g.createRef)(),t.inputRef=Object(g.createRef)(),t.textRef=Object(g.createRef)(),t.focusInput=t.focusInput.bind(m()(m()(t))),t.onKeyUp=t.onKeyUp.bind(m()(m()(t))),t.openList=t.openList.bind(m()(m()(t))),t.handleClickOutside=t.handleClickOutside.bind(m()(m()(t))),t.handleItemsNavigation=t.handleItemsNavigation.bind(m()(m()(t))),t.handleComboboxDropdownClick=t.handleComboboxDropdownClick.bind(m()(m()(t))),t.handleListItemClick=t.handleListItemClick.bind(m()(m()(t))),t.handlePillRemoveClick=t.handlePillRemoveClick.bind(m()(m()(t))),t.manageSelectedTags=t.manageSelectedTags.bind(m()(m()(t))),t}return d()(n,e),l()(n,[{key:"componentDidMount",value:function(){this.props.tags&&this.setInputWidth(),this.bindEvents()}},{key:"componentWillUnmount",value:function(){this.unBindEvents()}},{key:"reset",value:function(){var e=this.props,t=e.multiple,n=e.tags,r=e.value;this.setState({stateSelectedValues:R(t,n,r)})}},{key:"focusInput",value:function(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"closeList",value:function(){this.props.values;return{cursor:-1,opened:!1}}},{key:"openList",value:function(){return{opened:!0}}},{key:"onKeyUp",value:function(e){var t=this.props.tags,n=this.state,r=n.cursor,s=n.opened,o=this.filterValues(),a=Object.assign({},this.getSearchText());if(t&&"Escape"!==e.key&&(a=Object.assign({},a,this.setInputWidth())),"Enter"===e.key){var i=t?"manageSelectedTags":"manageSelectedValues";a=Object.assign({},a,this[i](r))}" "===e.key&&t&&(a=Object.assign({},a,this.manageSelectedTags())),!s&&this.inputRef.current.value&&o&&o.length&&"Escape"!==e.key&&(a=Object.assign({},a,this.openList())),"Escape"===e.key&&s&&(a=Object.assign({},a,this.closeList())),s&&o&&!o.length&&(a=Object.assign({},a,this.closeList())),this.setState(function(e){return Object.assign({},e,a)})}},{key:"handleItemsNavigation",value:function(e){var t=this.props.tags;if(-1!==["ArrowDown","ArrowUp"].indexOf(e.key)){var n,r=this.state.cursor,s=this.filterValues();if(e.preventDefault(),"ArrowDown"===e.key&&(-1===r||r===s.length-1?n=0:r<s.length-1&&(n=r+1)),"ArrowUp"===e.key&&(n=0<r?r-1:s.length-1),this.valuesListRef.current&&4<n){var o=38*(n-4);this.valuesListRef.current.scrollTop=t?o:60+o}else this.valuesListRef.current&&(this.valuesListRef.current.scrollTop=0);this.setState(function(e){return a()({},e,{opened:!0,cursor:n})})}}},{key:"handleListItemClick",value:function(e){var t=this.props.tags?"manageSelectedTags":"manageSelectedValues",n=Object.assign({},n,this[t](e));this.setState(function(e){return Object.assign({},e,n)})}},{key:"handlePillRemoveClick",value:function(e){if(!this.props.disabled){var t=this.removeSelectedValue(e);this.setState(function(e){return Object.assign({},e,t)})}}},{key:"handleClickOutside",value:function(){var t=this;this.valuesListRef.current&&!this.valuesListRef.current.contains(event.target)&&this.comboboxRef.current&&!this.comboboxRef.current.contains(event.target)&&this.setState(function(e){return Object.assign({},e,t.closeList())})}},{key:"handleComboboxDropdownClick",value:function(){var t=this;this.props.disabled||this.setState(function(e){return Object.assign({},e,t.openList())})}},{key:"bindEvents",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"unBindEvents",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"filterValues",value:function(){var t=this,e=this.props.values;return this.inputRef.current?e.filter(function(e){return-1<e.name.toLowerCase().indexOf(t.inputRef.current.value.toLowerCase())}):e}},{key:"setInputWidth",value:function(){return{width:50+this.textRef.current.offsetWidth}}},{key:"isInInitialValues",value:function(t){var e=this.props.values,n=!1;return e.forEach(function(e){t.id===e.id&&(n=!0)}),n}},{key:"getSelectedIndex",value:function(n){var e=this.state.stateSelectedValues,t=this.props,r=(t.tags,t.values,-1);return Array.isArray(e)?e.forEach(function(e,t){e.id===n.id&&(r=t)}):e&&e.id===n.id&&(r=0),r}},{key:"getSearchText",value:function(){return{searchText:this.inputRef.current.value}}},{key:"removeSelectedValue",value:function(e){var t=this.state.stateSelectedValues,n=this.props,r=n.onChange,s=(n.values,n.input,JSON.parse(JSON.stringify(t)));return s.splice(e,1),r&&"function"==typeof r&&r(s.length?s:null),{stateSelectedValues:s,searchText:""}}},{key:"addSelectedValue",value:function(e){var t=this.state.stateSelectedValues,n=this.props,r=n.onChange,s=(n.values,JSON.parse(JSON.stringify(t)));return s.push(e),r&&"function"==typeof r&&r(s.length?s:null),{stateSelectedValues:s,searchText:""}}},{key:"manageSelectedTags",value:function(e){this.state.stateSelectedValues;var t=this.filterValues(),n=this.props,r=(n.tags,n.values,{id:this.inputRef.current.value,name:this.inputRef.current.value}),s=t[e]||r,o=this.getSelectedIndex(s),a={};return this.inputRef.current.value="",-1<o&&this.isInInitialValues(s)?a=this.removeSelectedValue(o):-1===o&&(a=this.addSelectedValue(s)),a}},{key:"manageSelectedValues",value:function(e){var t,n=this.props,r=n.multiple,s=n.onChange,o=(n.tags,n.values,this.state.stateSelectedValues,this.filterValues()),a=o[e],i=this.getSelectedIndex(a);return a&&r?t=-1<i?this.removeSelectedValue(i):this.addSelectedValue(o[e]):(t={stateSelectedValues:-1===i?a:{id:null}},s&&"function"==typeof s&&s(-1===i?a:null)),t}},{key:"getListItemCssClasses",value:function(e,t){var n=[];return this.state.cursor===t&&n.push("active"),n.join(" ")}},{key:"getComboboxListCssClass",value:function(){var e=this.state.opened,t=this.props.tags,n=["tyk-combobox__list"];return e&&n.push("tyk-combobox__list--opened"),t&&n.push("tyk-combobox__list--has-tags"),n.join(" ")}},{key:"getCssClasses",value:function(){var e=this.props,t=e.error,n=e.disabled,r=["tyk-form-group","tyk-combobox"];return t&&r.push("has-error"),n&&r.push("disabled"),r.join(" ")}},{key:"getInputError",value:function(){var e=this.props.error;return e&&"true"!==e&&"false"!==e?k.a.createElement("p",{className:"tyk-form-control__error-message"},e):null}},{key:"getStyles",value:function(){var e=document.documentElement.scrollTop,t=this.comboboxRef.current,n=t.clientHeight,r=t.offsetWidth,s=(this.valuesListRef.current,t.getBoundingClientRect()),o=s.left;return{top:s.top+e+n-1+"px",left:o+"px",width:r+"px"}}},{key:"getComboboxDisplayData",value:function(){var r=this.state.stateSelectedValues,e=this.props,t=e.multiple,n=e.placeholder;return r?r&&Array.isArray(r)&&!r.length?n:!r||Array.isArray(r)||r.id?Array.isArray(r)&&t?r.reduce(function(e,t,n){return e+t.name+(n!==r.length-1?", ":"")},""):r.name:n:n}},{key:"render",value:function(){var n=this,e=this.props,t=e.disabled,r=e.tags,s=e.placeholder,o=this.state,a=o.width,i=o.opened,l=o.searchText,u=o.stateSelectedValues,c=this.filterValues();return k.a.createElement(g.Fragment,null,k.a.createElement("div",{className:this.getCssClasses()},this.props.label?k.a.createElement("label",{htmlFor:this.props.id},this.props.label):null,k.a.createElement("ul",{className:"tyk-form-control",onClick:this.focusInput,ref:this.comboboxRef},r?k.a.createElement(g.Fragment,null,u.map(function(e,t){return k.a.createElement("li",{className:"pill",key:e.id},k.a.createElement("a",{onClick:n.handlePillRemoveClick.bind(n,t)},k.a.createElement(E.a,{type:"times"})),k.a.createElement("span",null,e.name))}),k.a.createElement("li",{className:"tyk-combobox__search-box",style:{width:u.length?"auto":"100%"}},k.a.createElement("input",{className:"tyk-form-control",disabled:t,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},onKeyUp:this.onKeyUp,onKeyDown:this.handleItemsNavigation,placeholder:u.length?"":s,ref:this.inputRef,style:{width:u.length?a+"px":"100%"}}),k.a.createElement("span",{ref:this.textRef,style:{visbility:"hidden",position:"absolute",top:"-9999px"}},l))):k.a.createElement("li",{className:"tyk-combobox__placeholder",onClick:this.handleComboboxDropdownClick},this.getComboboxDisplayData(),k.a.createElement(E.a,{type:"arrow-down"}))),this.props.note?k.a.createElement("p",{className:"tyk-form-control__help-block"},this.props.note):null),this.getInputError(),i&&c.length?x.a.createPortal(k.a.createElement("ul",{className:this.getComboboxListCssClass(),ref:this.valuesListRef,style:this.getStyles()},r?null:k.a.createElement("li",{className:"combobox-search__container"},k.a.createElement("input",{autoFocus:i,className:"tyk-form-control",onKeyUp:this.onKeyUp,onKeyDown:this.handleItemsNavigation,key:"searchInput",ref:this.inputRef})),c.map(function(e,t){return k.a.createElement("li",{className:n.getListItemCssClasses(e,t),onClick:n.handleListItemClick.bind(n,t),key:e.id},-1<n.getSelectedIndex(e)?k.a.createElement(E.a,{type:"check"}):null,k.a.createElement("span",null," ",e.name))})),document.querySelector("body")):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return JSON.stringify(e.value)!==JSON.stringify(t.initialValue)?{initialValue:e.value,stateSelectedValues:R(e.multiple,e.tags,e.value)}:null}}]),n}(g.Component);v()(j,"propTypes",{disabled:C.a.bool,id:C.a.string,label:C.a.string,multiple:C.a.bool,name:C.a.string,note:C.a.string,onChange:C.a.func,placeholder:C.a.string,tags:C.a.bool,validationmessages:C.a.object,values:C.a.array})}});